<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Advanced Uses • npi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Advanced Uses">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">npi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/npi.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/advanced-use.html">Advanced Uses</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci/npi/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Advanced Uses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/npi/blob/master/vignettes/advanced-use.Rmd" class="external-link"><code>vignettes/advanced-use.Rmd</code></a></small>
      <div class="d-none name"><code>advanced-use.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/npi" class="external-link">npi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://purrr.tidyverse.org/" class="external-link">purrr</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette explores advanced uses of the npi package.</p>
<p><code>npi</code> is an R package that allows R users to access the <a href="https://npiregistry.cms.hhs.gov/" class="external-link">U.S. National Provider
Identifier (NPI) Registry</a> API by the Center for Medicare and
Medicaid Services (CMS). The package makes it easy to obtain
administrative data linked to a specific individual or organizational
healthcare provider. Additionally, users can perform advanced searches
based on provider name, location, type of service, credentials, and many
other attributes.</p>
<p>See the npi::npi vignette for an introduction to the package.</p>
<div class="section level2">
<h2 id="note-on-npi-downloadable-files">Note on NPI Downloadable Files<a class="anchor" aria-label="anchor" href="#note-on-npi-downloadable-files"></a>
</h2>
<p>CMS regularly releases full NPI data files <a href="https://download.cms.gov/nppes/NPI_Files.html" class="external-link">here</a>. We
recommend that users download the data file if they need to work with
the entire dataset. The API and <code><a href="../reference/npi_search.html">npi_search()</a></code> returns a
maximum of 1,200 records. Also consider downloading the entire data if
you need to work with more than the maximum. Data dissemination files
are zipped and will exceed 4GB upon decompression.</p>
</div>
<div class="section level2">
<h2 id="run-npi_search-on-multiple-search-terms">Run <code>npi_search()</code> on multiple search terms<a class="anchor" aria-label="anchor" href="#run-npi_search-on-multiple-search-terms"></a>
</h2>
<p><code><a href="../reference/npi_search.html">npi_search()</a></code> enables search for a defined set query
parameters. The function is not designed for search on multiple values
of the same argument at once, as for example in the case of multiple NPI
numbers in a single function call. However, users can still serially
execute searches for multiple values of a single query parameter by
using <code>npi</code> in combination with the <a href="https://purrr.tidyverse.org/" class="external-link"><code>purrr</code></a> package. In
the example below, we search multiple NPI numbers. A single tibble is
returned with record information corresponding to matching records. The
<a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">purrr:map()</a>
function is used to apply the <code><a href="../reference/npi_search.html">npi_search()</a></code> function on each
element of the vector. Thereafter, the <a href="https://dplyr.tidyverse.org/reference/bind.html" class="external-link">dplyr::bind_rows()</a>
function is used to combine the list of dataframes together into a
single dataframe.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">npis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1992708929</span>, <span class="fl">1831192848</span>, <span class="fl">1699778688</span>, <span class="fl">1111111111</span><span class="op">)</span>  <span class="co"># Last element doesn't exist</span></span>
<span></span>
<span><span class="va">out</span> <span class="op">&lt;-</span> <span class="va">npis</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">.</span>, <span class="op">~</span> <span class="fu"><a href="../reference/npi_search.html">npi_search</a></span><span class="op">(</span>number <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span></span>
<span><span class="fu"><a href="../reference/npi_summarize.html">npi_summarize</a></span><span class="op">(</span><span class="va">out</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#&gt;   npi       name  enumeration_type primary_practice_add…¹ phone primary_taxonomy</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 19927089… NOVA… Organization     3200 DOWNWOOD CIR NW … 404-… Orthopaedic Sur…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 18311928… MATT… Individual       3672 MARATHON CIRCLE … 770-… Clinic/Center, …</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated name: ¹​primary_practice_address</span></span></span></code></pre></div>
<p>Here we search for multiple zip codes in Los Angeles County.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">codes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">90210</span>, <span class="fl">90211</span>, <span class="fl">90212</span><span class="op">)</span></span>
<span></span>
<span><span class="va">zip_3</span> <span class="op">&lt;-</span> <span class="va">codes</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">.</span>, <span class="op">~</span> <span class="fu"><a href="../reference/npi_search.html">npi_search</a></span><span class="op">(</span>postal_code  <span class="op">=</span> <span class="va">.</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span></span>
<span><span class="fu"><a href="../reference/npi_flatten.html">npi_flatten</a></span><span class="op">(</span><span class="va">zip_3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 104 × 47</span></span></span>
<span><span class="co">#&gt;    npi      basic_organization_n…¹ basic_organizational…² basic_enumeration_date</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1073703… A R T REPRODUCTIVE CE… NO                     2007-07-25            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1073703… A R T REPRODUCTIVE CE… NO                     2007-07-25            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1154507… AARON M. PERLMUTTER, … NO                     2008-01-11            </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 94 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated names: ¹​basic_organization_name, ²​basic_organizational_subpart</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 43 more variables: basic_last_updated &lt;chr&gt;, basic_status &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   basic_authorized_official_first_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   basic_authorized_official_last_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   basic_authorized_official_middle_name &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   basic_authorized_official_telephone_number &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>Consult the R for Data Science <a href="https://r4ds.had.co.nz/iteration.html" class="external-link">chapter on iteration</a> to
learn more about using the <code>purrr</code> package.</p>
<p>Alternatively, you can use a simple for loop instead if you are
unfamiliar with the tidyverse approach.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">npis</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1992708929</span>, <span class="fl">1831192848</span>, <span class="fl">1699778688</span>, <span class="fl">1111111111</span><span class="op">)</span>  <span class="co"># Last element doesn't exist</span></span>
<span><span class="va">combined_df</span>  <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="va">npis</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">combined_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">combined_df</span>, <span class="fu"><a href="../reference/npi_search.html">npi_search</a></span><span class="op">(</span>number <span class="op">=</span> <span class="va">i</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span><span class="co">#&gt; 10 records requested</span></span>
<span><span class="co">#&gt; Requesting records 0-10...</span></span>
<span></span>
<span><span class="fu"><a href="../reference/npi_summarize.html">npi_summarize</a></span><span class="op">(</span><span class="va">combined_df</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 2 × 6</span></span></span>
<span><span class="co">#&gt;   npi       name  enumeration_type primary_practice_add…¹ phone primary_taxonomy</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 19927089… NOVA… Organization     3200 DOWNWOOD CIR NW … 404-… Orthopaedic Sur…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 18311928… MATT… Individual       3672 MARATHON CIRCLE … 770-… Clinic/Center, …</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ abbreviated name: ¹​primary_practice_address</span></span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Frank Farach.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
